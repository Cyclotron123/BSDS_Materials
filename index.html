<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>BSDS Materials</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <style>
    body { padding: 2rem; background: #f9f9f9; }
    h1 { margin-bottom: 1rem; }
    .folder { font-weight: bold; cursor: pointer; }
    .nested { display: none; margin-left: 1rem; }
    .active { display: block; }
    .file-link { text-decoration: none; color: #007bff; }
    .file-link:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ“š BSDS Materials</h1>
    <p>All notes and documents organized by folder. Click to expand folders and access files.</p>
    <div id="file-tree"></div>
  </div>

  <script>
    const repo = "Cyclotron123/BSDS_Materials";
    const branch = "main";

    async function fetchRepoTree(path = "") {
      const apiUrl = `https://api.github.com/repos/${repo}/contents/${path}?ref=${branch}`;
      const res = await fetch(apiUrl);
      return res.json();
    }

    async function buildTree(container, path = "") {
      const items = await fetchRepoTree(path);
      items.sort((a, b) => a.type.localeCompare(b.type)); // folders first

      for (const item of items) {
        const div = document.createElement("div");

        if (item.type === "dir") {
          div.innerHTML = `<div class="folder">ğŸ“ ${item.name}</div>`;
          const nested = document.createElement("div");
          nested.classList.add("nested");
          div.appendChild(nested);

          div.querySelector(".folder").addEventListener("click", () => {
            nested.classList.toggle("active");
            if (!nested.hasChildNodes()) {
              buildTree(nested, item.path);
            }
          });
        } else {
          const fileUrl = `https://github.com/${repo}/blob/${branch}/${item.path}`;
          div.innerHTML = `<div>ğŸ“„ <a class="file-link" href="${fileUrl}" target="_blank">${item.name}</a></div>`;
        }

        container.appendChild(div);
      }
    }

    buildTree(document.getElementById("file-tree"));
  </script>
</body>
</html>
